{"version":3,"file":"component---src-pages-admin-js-32777ab53b8b32060a8b.js","mappings":"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","sources":["webpack://netlify-functions/./const.js","webpack://netlify-functions/./src/pages/admin.js"],"sourcesContent":["export const AUTHORIZED_ID_1 = \"isijolatosin2210@gmail.com\"\nexport const AUTHORIZED_ID_2 = \"bandgluxuryinternal@gmail.com\"\nexport const AUTHORIZED_ID_3 = \"bandgluxuryinternal@gmail.com\"\nexport const SHIPPING_COST = {\n  canada: 6.99,\n  usa: 20.99,\n  london: 20.99,\n}\nexport const CANADA = \"canada\"\nexport const USERS = \"users\"\nexport const BOOKINGS = \"bookings\"\nexport const FREE_SHIPPING_AMOUNT = 200\nexport const CURRENCY = \"cad\"\nexport const TAX_PERCENT = 0.13\n\nexport const HTTPS_LINK = \"https://www.bandgluxuryempire.com\"\n// export const HTTPS_LINK = \"http://localhost:8888\"\n","import React, { useContext } from \"react\"\nimport Layout from \"../components/Layout\"\nimport { db } from \"../../firebase\"\nimport { AuthContext } from \"../context/auth\"\nimport { MdOutlineKeyboardArrowUp } from \"react-icons/md\"\nimport { MdOutlineKeyboardArrowDown } from \"react-icons/md\"\nimport { AUTHORIZED_ID_1, AUTHORIZED_ID_2, AUTHORIZED_ID_3 } from \"../../const\"\nimport { Link } from \"gatsby\"\n\nconst Admin = () => {\n  const { user } = useContext(AuthContext)\n  const [isLoading, setIsLoading] = React.useState(true)\n  const [modal, setModal] = React.useState(false)\n  const [readMore, setReadMore] = React.useState(false)\n  const [matchIdx, setMatchIdx] = React.useState(\"\")\n  const [shippingInfo, setShippingInfo] = React.useState({\n    shippingHeader: [],\n    shippingData: [],\n  })\n  const getObjectHeader = object => {\n    let objectKeys = []\n    if (object) {\n      for (let i = 0; i < object.length; i++) {\n        objectKeys.push(Object?.keys(object?.[i]?.data || []))\n      }\n    }\n    objectKeys.map(item => item.sort())\n    return objectKeys\n  }\n\n  React.useEffect(() => {\n    // getting address and details for shipping\n    user &&\n      db\n        .collection(\"admin\")\n        .doc(`${AUTHORIZED_ID_1}/`)\n        .collection(\"all-purchased\")\n        .orderBy(\"title\", \"asc\")\n        .onSnapshot(snapshot => {\n          const results = snapshot.docs.map(doc => ({\n            data: doc.data(),\n          }))\n          if (results) {\n            let data = []\n            for (const result of results) {\n              data.push({\n                address: result?.data.address,\n                customer: result?.data.customer,\n                description: result?.data.description,\n                id: result?.data.id,\n                price: `CA$ ${result?.data.price}`,\n                quantity: result?.data.quantity,\n                title: result?.data.title,\n              })\n            }\n\n            setShippingInfo({\n              shippingHeader: getObjectHeader(results),\n              shippingData: data,\n            })\n          }\n        })\n  }, [user])\n\n  if (isLoading) {\n    setTimeout(() => {\n      setIsLoading(false)\n    }, 5000)\n  }\n  const toggleRead = idx => {\n    setMatchIdx(idx)\n    setReadMore(!readMore)\n  }\n  const toggleModal = idx => {\n    setMatchIdx(idx)\n    setModal(true)\n  }\n\n  const hideShipped = id => {\n    db.collection(\"admin\")\n      .doc(`${AUTHORIZED_ID_1}/`)\n      .collection(\"all-purchased\")\n      .onSnapshot(snapshot => {\n        snapshot.docs.map(\n          doc =>\n            doc.data().id === id &&\n            db\n              .collection(\"admin\")\n              .doc(`${AUTHORIZED_ID_1}/`)\n              .collection(\"all-purchased\")\n              .doc(doc.id)\n              .delete()\n        )\n      })\n  }\n\n  return (\n    <div>\n      <Layout>\n        {user?.email === AUTHORIZED_ID_1 ||\n        AUTHORIZED_ID_2 ||\n        AUTHORIZED_ID_3 ? (\n          <main className=\"history-page\">\n            {shippingInfo?.shippingHeader?.length === 0 &&\n            shippingInfo?.shippingHeader?.length === 0 ? (\n              isLoading ? (\n                <span>Loading...</span>\n              ) : (\n                <span>Data not Found</span>\n              )\n            ) : (\n              <>\n                <div className=\"top\">\n                  {shippingInfo?.shippingHeader?.length !== 0 && (\n                    <p>shipping Information</p>\n                    // <p className=\"account-page-header\">shipping Information</p>\n                  )}\n                  <table>\n                    <thead>\n                      <tr className=\"table-head-row\">\n                        {shippingInfo?.shippingHeader?.[0]?.map((head, idx) => (\n                          <th key={idx} className=\"table-head-item\">\n                            {head}{\" \"}\n                            {head === \"appointment\" || head === \"reservation\"\n                              ? \" - date\"\n                              : \"\"}\n                          </th>\n                        ))}\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {shippingInfo?.shippingData?.map(item => (\n                        <tr className=\"table-item-row\" key={item.id}>\n                          {Object?.values(item)?.map((itm, index) => (\n                            <td\n                              className={\n                                itm.length >= 200\n                                  ? \"table-items align-left\"\n                                  : \"table-items\"\n                              }\n                              key={index}\n                              onClick={() => toggleModal(item.id)}\n                            >\n                              {typeof itm === \"string\"\n                                ? itm.length >= 200\n                                  ? readMore && matchIdx === item.id\n                                    ? itm\n                                    : `${itm.substring(0, 70)}...`\n                                  : itm\n                                : itm}\n                              {itm.length >= 200 && (\n                                <>\n                                  <span onClick={() => toggleRead(item.id)}>\n                                    {readMore && matchIdx === item.id ? (\n                                      <>\n                                        <span>Read Less</span>{\" \"}\n                                        <MdOutlineKeyboardArrowUp />\n                                      </>\n                                    ) : (\n                                      <>\n                                        <span>Read More</span>{\" \"}\n                                        <MdOutlineKeyboardArrowDown />\n                                      </>\n                                    )}\n                                  </span>\n                                </>\n                              )}\n                            </td>\n                          ))}\n                          {modal && matchIdx === item.id && (\n                            <div className=\"been-shipped\">\n                              <span>\n                                Has this product been shipped ? <br />\n                                <span className=\"been-shipped-textsm\">\n                                  Please verify before clicking on yes\n                                </span>\n                              </span>\n                              <div>\n                                <button onClick={() => hideShipped(item.id)}>\n                                  Yes\n                                </button>\n                                <button onClick={() => setModal(false)}>\n                                  No\n                                </button>\n                              </div>\n                            </div>\n                          )}\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              </>\n            )}\n          </main>\n        ) : (\n          <div className=\"history-page\">\n            <p className=\"danger\">UNAUTHORIZED PATH!</p>\n            <Link to=\"/\" className=\"btn block total_btn\">\n              Back to Home\n            </Link>\n          </div>\n        )}\n      </Layout>\n    </div>\n  )\n}\n\nexport default Admin\n"],"names":["AUTHORIZED_ID_1","AUTHORIZED_ID_2","AUTHORIZED_ID_3","SHIPPING_COST","canada","usa","london","CANADA","USERS","BOOKINGS","FREE_SHIPPING_AMOUNT","CURRENCY","TAX_PERCENT","HTTPS_LINK","user","useContext","AuthContext","React","isLoading","setIsLoading","modal","setModal","readMore","setReadMore","matchIdx","setMatchIdx","shippingHeader","shippingData","shippingInfo","setShippingInfo","getObjectHeader","object","objectKeys","i","length","push","Object","keys","data","map","item","sort","db","doc","collection","orderBy","onSnapshot","snapshot","results","docs","result","address","customer","description","id","price","quantity","title","setTimeout","email","className","head","idx","key","values","itm","index","onClick","substring","delete","to"],"sourceRoot":""}