"use strict";(self.webpackChunknetlify_functions=self.webpackChunknetlify_functions||[]).push([[510],{5390:function(t,e,n){n.d(e,{P9:function(){return a},Tu:function(){return i},Ps:function(){return u},nb:function(){return r},zt:function(){return s},$I:function(){return l},wA:function(){return o},UP:function(){return c}});var a="isijolatosin2210@gmail.com",i={canada:50,usa:100,london:100},u="canada",r="users",s="bookings",l=200,o="cad",c="http://localhost:8888"},8880:function(t,e,n){n.d(e,{u:function(){return s},Q:function(){return o}});var a=n(5861),i=n(7757),u=n.n(i),r=n(5390),s=function(t,e){return e.find((function(e){return e.id===t.id}))},l=r.UP;function o(t,e){return c.apply(this,arguments)}function c(){return(c=(0,a.Z)(u().mark((function t(e,n){var a,i,r,s;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({method:"POST",body:null},n),i=a.method,r=a.body,t.next=3,fetch(l+"/"+e,Object.assign({method:i},r&&{body:JSON.stringify(r)},{headers:{"Content-Type":"application/json"}}));case 3:return s=t.sent,t.abrupt("return",s.json());case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},867:function(t,e,n){n.r(e),n.d(e,{default:function(){return b}});var a=n(7294),i=n(1681),u=n(8767),r=n(2359),s=n(2775),l=n(1852),o=n(782),c=n(2101),p=n(3218),m=function(t){var e=t.product,n=e.title,u=e.image,m=e.price,d=e.quantity,v=e.description,Z=e.id,y=a.useState(!1),f=y[0],h=y[1],g=(0,i.I0)(),C=(0,r.d)(u),N={title:n,id:Z,image:u,price:m,description:v};return(0,p.tZ)("div",{className:"cart-items-container"},(0,p.tZ)("div",{className:"cart-image"},(0,p.tZ)(r.G,{image:C,alt:n})),(0,p.tZ)("div",{className:"cart-item-info"},(0,p.tZ)("div",null,(0,p.tZ)("h4",null,n)),(0,p.tZ)("div",{className:"price-quantity"},(0,p.tZ)("span",null,"Price: CA$ "+m),(0,p.tZ)("span",null,"Quantity: "+d)),(0,p.tZ)("div",{className:"description-readmore"},!f&&v.length>=100?(0,p.tZ)("span",null,v.substring(0,50),"..."):(0,p.tZ)("span",null,v),v.length>=100&&(0,p.tZ)("span",{onClick:function(){return h(!f)},className:"read_more"},f?(0,p.tZ)(a.Fragment,null,(0,p.tZ)("span",null,"Read Less")," ",(0,p.tZ)(s.DJ5,null)):(0,p.tZ)(a.Fragment,null,(0,p.tZ)("span",null,"Read More")," ",(0,p.tZ)(s.x3N,null)))),(0,p.tZ)("div",{className:"cart-item-icons"},(0,p.tZ)("div",{className:"cart-item-icon",onClick:function(){g((0,c.NB)(N))}},(0,p.tZ)(s.tX2,null),(0,p.tZ)("span",null,"Add")),1===d&&(0,p.tZ)("div",{className:"cart-item-icon",onClick:function(){g((0,c.B8)(N))}},(0,p.tZ)(o.Fe4,null),(0,p.tZ)("span",null,"Delete")),d>1&&(0,p.tZ)("div",{className:"cart-item-icon",onClick:function(){g((0,c.UI)(N))}},(0,p.tZ)(l._0z,null),(0,p.tZ)("span",null,"Remove")))))},d=n(5861),v=n(7757),Z=n.n(v),y=n(5360),f=n(8880),h=n(6562),g=n(5390),C=function(){var t=(0,i.v9)(c.D1),e=(0,y.useStripe)(),n=a.useState(""),u=n[0],r=n[1],s=a.useState(null),o=s[0],m=s[1],v=a.useState(!1),C=v[0],N=v[1],b=a.useState({street:"",city:"",province:"",postalcode:"",country:""}),_=b[0],k=b[1],x=a.useState({country:"",cost:""}),S=x[0],A=x[1],P=a.useState(!1),w=P[0],T=P[1],I=(0,i.I0)(),D=(0,a.useContext)(h.V).user,R=function(t){var e;k(Object.assign({},_,((e={})[t.target.name]=t.target.value,e)))},j=(0,i.v9)(c.mS),E=function(){var n=(0,d.Z)(Z().mark((function n(a){var i,r,s,l,o,c,p;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!C){n.next=13;break}return r=t.map((function(t){var e=t.description.substring(0,200)+"...";return{quantity:t.quantity,price_data:{currency:g.wA,unit_amount:100*t.price,product_data:{name:t.title,description:e}}}})),s=j>=g.$I&&S.country===g.Ps?[{shipping_rate_data:{type:"fixed_amount",fixed_amount:{amount:0,currency:g.wA},display_name:"Free shipping",delivery_estimate:{minimum:{unit:"business_day",value:5},maximum:{unit:"business_day",value:7}}}}]:[{shipping_rate_data:{type:"fixed_amount",fixed_amount:{amount:100*S.cost,currency:g.wA},display_name:"Paid Delivery",delivery_estimate:{minimum:{unit:"business_day",value:5},maximum:{unit:"business_day",value:7}}}}],n.next=6,(0,f.Q)("create-checkout-session",{body:{line_items:r,shipping_options:s,customer_email:D?(null==D?void 0:D.email)||(null==D||null===(i=D.user)||void 0===i?void 0:i.email):u}});case 6:return l=n.sent,o=l.sessionId,n.next=10,e.redirectToCheckout({sessionId:o});case 10:c=n.sent,(p=c.error)&&m(p.message);case 13:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}();return(0,p.tZ)("form",{onSubmit:E},(0,p.tZ)("div",{className:"shipping-add-header"},(0,p.tZ)("div",{className:"ship-head"},(0,p.tZ)("p",null,"Shipping - Cost")),(0,p.tZ)("div",{className:"ship-countries"},(0,p.tZ)("ul",null,(0,p.tZ)("li",null,"canada - CA$ ",g.Tu.canada),(0,p.tZ)("li",null,"usa - CA$ ",g.Tu.usa),(0,p.tZ)("li",null,"london - CA$ ",g.Tu.london)))),(0,p.tZ)("div",{className:"inputs"},!D&&(0,p.tZ)("input",{type:"email",onChange:function(t){return r(t.target.value)},placeholder:"Email",value:u,className:w&&!u?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("input",{name:"street",type:"text",value:_.street,onChange:R,placeholder:"Address",className:w&&!_.street?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("input",{name:"city",type:"text",value:_.city,onChange:R,placeholder:"City",className:w&&!_.city?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("input",{name:"province",type:"text",value:_.province,onChange:R,placeholder:"Province",className:w&&!_.province?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("input",{name:"postalcode",type:"text",value:_.postalcode,onChange:R,placeholder:"Postal Code",className:w&&!_.postalcode?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("input",{name:"country",type:"text",value:_.country,onChange:R,placeholder:"Country",className:w&&!_.country?"user-email-input input-error":"user-email-input"}),(0,p.tZ)("span",{onClick:function(){var t=_.street+", "+_.city+". "+_.province+". "+_.postalcode+". "+_.country;D&&u||T(!0),(D&&null!=_&&_.street&&null!=_&&_.city&&null!=_&&_.province&&null!=_&&_.postalcode&&null!=_&&_.country||u&&null!=_&&_.street&&null!=_&&_.city&&null!=_&&_.province&&null!=_&&_.postalcode&&null!=_&&_.country)&&(localStorage.setItem("address",t),N(!0),k({street:"",city:"",province:"",postalcode:"",country:""}),T(!1)),Object.keys(g.Tu).filter((function(t){return t.toLowerCase()===_.country.toLowerCase()&&A({country:t,cost:g.Tu[t]})}))},className:"btn block subt-add"},"SUBMIT ADDRESS")),"com"===u.substr(u.length-3)&&(0,p.tZ)("div",{className:"email-verify"},(0,p.tZ)("span",null,"Please verify you have the correct email and address")),w&&u.length<1&&(0,p.tZ)("div",{className:"user-email-input-error"},(0,p.tZ)("span",null,"Hey! You have missing credentials!")),(0,p.tZ)("div",{className:"total-button"},(0,p.tZ)("button",{onClick:function(){return!C&&T(!0)},className:"btn total-btn",type:"submit"},"PROCEED |"," ",(0,p.tZ)("span",null,(0,p.tZ)(l.EIo,null))),(0,p.tZ)("span",{onClick:function(){return I((0,c.QR)())},className:"btn block total_btn"},"CLEAR CART")),o&&(0,p.tZ)("div",{className:"checkout-error"},(0,p.tZ)("span",null,o)))},N=function(t){var e=t.itemCount,n=t.total;return(0,p.tZ)("div",null,(0,p.tZ)("div",{className:"total-top"},(0,p.tZ)("p",null,"Total Items: ",e),(0,p.tZ)("span",null,"Amount to Pay: CA$ "+n)),(0,p.tZ)(C,null))},b=function(){var t=(0,i.v9)(c.uR),e=(0,i.v9)(c.mS),n=(0,i.v9)(c.D1);return(0,p.tZ)(u.Z,null,(0,p.tZ)("div",{className:"cart"},(0,p.tZ)("h2",null,"Cart"),0===n.length?(0,p.tZ)("div",{className:"empty"},"Your Cart is Empty"):(0,p.tZ)("div",{className:"cart-container"},(0,p.tZ)("div",null,(0,p.tZ)("div",{className:"cart-left"},n.map((function(t){return(0,p.tZ)(m,{product:t,key:t.id})})))),(0,p.tZ)("div",{className:"total"},(0,p.tZ)(N,{itemCount:t,total:e})))))}}}]);
//# sourceMappingURL=component---src-pages-checkout-js-c68e58ed75e3683af5a8.js.map